<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Start a build from a script | mysite </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Start a build from a script | mysite ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/bossbobofather-cpu/noname/blob/main/Library/PackageCache/com.unity.addressables@38fa2290d5f2/Documentation~/build-scripting-start-build.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../logo.svg" alt="mysite">
            mysite
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="start-a-build-from-a-script">Start a build from a script</h1>

<p>To start a build from another script, call the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.BuildPlayerContent*"><code>AddressableAssetSettings.BuildPlayerContent</code></a> method.</p>
<p>Before starting the build, set the active <a href="AddressableAssetsProfiles.html">Profile</a> and the active build script. You can also set a different <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings"><code>AddressableAssetSettings</code></a> object than the default.</p>
<p><code>BuildPlayerContent</code> takes into consideration the following information when performing the build:</p>
<ul>
<li><a href="xref:UnityEditor.AddressableAssets.AddressableAssetSettingsDefaultObject"><code>AddressableAssetSettingsDefaultObject</code></a></li>
<li><a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.ActivePlayerDataBuilder"><code>ActivePlayerDataBuilder</code></a></li>
<li>The <code>addressables_content_state.bin</code> file.</li>
</ul>
<h2 id="set-the-addressableassetsettings">Set the AddressableAssetSettings</h2>
<p>The settings defined by <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings"><code>AddressableAssetSettings</code></a> include the list of <a href="groups-intro.html">groups</a> and the <a href="profiles-introduction.html">profile</a> to use.</p>
<p>To access the settings displayed in the Unity Editor (menu: <strong>Window &gt; Asset Management &gt; Addressables &gt; Settings</strong>), use the static <a href="xref:UnityEditor.AddressableAssets.AddressableAssetSettingsDefaultObject.Settings"><code>AddressableAssetSettingsDefaultObject.Settings</code></a> property. However, if desired, you can use a different settings object for a build.</p>
<p>To load a custom settings object in a build:</p>
<pre><code class="lang-cs" name="sample">
static void getSettingsObject(string settingsAsset)
{
    // This step is optional, you can also use the default settings:
    //settings = AddressableAssetSettingsDefaultObject.Settings;

    settings
        = AssetDatabase.LoadAssetAtPath&lt;ScriptableObject&gt;(settingsAsset)
            as AddressableAssetSettings;

    if (settings == null)
        Debug.LogError($&quot;{settingsAsset} couldn't be found or isn't &quot; +
                       $&quot;a settings object.&quot;);
}

</code></pre><h2 id="set-the-active-profile">Set the active profile</h2>
<p>A build started with <code>BuildContent</code> uses the variable settings of the active profile. To set the active profile as part of your customized build script, assign the ID of the desired profile to the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.activeProfileId"><code>activeProfileId</code></a> field of the <a href="xref:UnityEditor.AddressableAssets.AddressableAssetSettingsDefaultObject.Settings"><code>AddressableAssetSettingsDefaultObject.Settings</code></a> object.</p>
<p>The <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings"><code>AddressableAssetSettings</code></a> object contains the list of profiles. Use the name of the desired profile to look up its ID value and then assign the ID to the <code>activeProfileId</code> variable:</p>
<pre><code class="lang-cs" name="sample">
static void setProfile(string profile)
{
    string profileId = settings.profileSettings.GetProfileId(profile);
    if (String.IsNullOrEmpty(profileId))
        Debug.LogWarning($&quot;Couldn't find a profile named, {profile}, &quot; +
                         $&quot;using current profile instead.&quot;);
    else
        settings.activeProfileId = profileId;
}

</code></pre><h2 id="set-the-active-build-script">Set the active build script</h2>
<p>The <code>BuildContent</code> method launches the build based on the current <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.ActivePlayerDataBuilder"><code>ActivePlayerDataBuilder</code></a> setting. To use a specific build script, assign the index of the <code>IDataBuilder</code> object in the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.DataBuilders"><code>AddressableAssetSetting.DataBuilders</code></a> list to the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.ActivePlayerDataBuilderIndex"><code>ActivePlayerDataBuilderIndex</code></a> property.</p>
<p>The build script must be a <code>ScriptableObject</code> that implements <a href="(xref:UnityEditor.AddressableAssets.Build.IDataBuilder)"><code>IDataBuilder</code></a> and you must add it to the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.DataBuilders"><code>DataBuilders</code></a> list in the <a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings"><code>AddressableAssetSettings</code></a> instance. Once added to the list, use the standard <a href="xref:System.Collections.Generic.List%601.IndexOf*"><code>List.IndexOf</code></a> method to get the index of the object.</p>
<pre><code class="lang-cs" name="sample">
static void setBuilder(IDataBuilder builder)
{
    int index = settings.DataBuilders.IndexOf((ScriptableObject)builder);

    if (index &gt; 0)
        settings.ActivePlayerDataBuilderIndex = index;
    else
        Debug.LogWarning($&quot;{builder} must be added to the &quot; +
                         $&quot;DataBuilders list before it can be made &quot; +
                         $&quot;active. Using last run builder instead.&quot;);
}

</code></pre><h2 id="launch-a-build">Launch a build</h2>
<p>After setting the profile and builder to use, you can launch the build:</p>
<pre><code class="lang-cs" name="sample">
static bool buildAddressableContent()
{
    AddressableAssetSettings
        .BuildPlayerContent(out AddressablesPlayerBuildResult result);
    bool success = string.IsNullOrEmpty(result.Error);

    if (!success)
    {
        Debug.LogError(&quot;Addressables build error encountered: &quot; + result.Error);
    }

    return success;
}

</code></pre>
<p>To check for success, use <code>BuildPlayerContent(out AddressablesPlayerBuildResult result)</code>. <code>result.Error</code> contains any error message returned if the Addressables build failed. If <code>string.IsNullOrEmpty(result.Error)</code> is true, the build was successful.</p>
<h3 id="example-script-to-launch-build">Example script to launch build</h3>
<p>The following example adds two menu commands to the <strong>Window &gt; Asset Management &gt; Addressables</strong> menu in the Editor. The first command builds the Addressable content using the preset profile and build script. The second command builds the Addressable content, and if it succeeds, builds the Player.</p>
<pre><code class="lang-cs" name="sample">
#if UNITY_EDITOR
    using UnityEditor;
    using UnityEditor.AddressableAssets.Build;
    using UnityEditor.AddressableAssets.Settings;
    using System;
    using UnityEngine;

    internal class BuildLauncher
    {
        public static string build_script
            = &quot;Assets/AddressableAssetsData/DataBuilders/BuildScriptPackedMode.asset&quot;;

        public static string settings_asset
            = &quot;Assets/AddressableAssetsData/AddressableAssetSettings.asset&quot;;

        public static string profile_name = &quot;Default&quot;;
        private static AddressableAssetSettings settings;


        static void getSettingsObject(string settingsAsset)
        {
            // This step is optional, you can also use the default settings:
            //settings = AddressableAssetSettingsDefaultObject.Settings;

            settings
                = AssetDatabase.LoadAssetAtPath&lt;ScriptableObject&gt;(settingsAsset)
                    as AddressableAssetSettings;

            if (settings == null)
                Debug.LogError($&quot;{settingsAsset} couldn't be found or isn't &quot; +
                               $&quot;a settings object.&quot;);
        }



        static void setProfile(string profile)
        {
            string profileId = settings.profileSettings.GetProfileId(profile);
            if (String.IsNullOrEmpty(profileId))
                Debug.LogWarning($&quot;Couldn't find a profile named, {profile}, &quot; +
                                 $&quot;using current profile instead.&quot;);
            else
                settings.activeProfileId = profileId;
        }



        static void setBuilder(IDataBuilder builder)
        {
            int index = settings.DataBuilders.IndexOf((ScriptableObject)builder);

            if (index &gt; 0)
                settings.ActivePlayerDataBuilderIndex = index;
            else
                Debug.LogWarning($&quot;{builder} must be added to the &quot; +
                                 $&quot;DataBuilders list before it can be made &quot; +
                                 $&quot;active. Using last run builder instead.&quot;);
        }



        static bool buildAddressableContent()
        {
            AddressableAssetSettings
                .BuildPlayerContent(out AddressablesPlayerBuildResult result);
            bool success = string.IsNullOrEmpty(result.Error);

            if (!success)
            {
                Debug.LogError(&quot;Addressables build error encountered: &quot; + result.Error);
            }

            return success;
        }


        [MenuItem(&quot;Window/Asset Management/Addressables/Build Addressables only&quot;)]
        public static bool BuildAddressables()
        {
            getSettingsObject(settings_asset);
            setProfile(profile_name);
            IDataBuilder builderScript
                = AssetDatabase.LoadAssetAtPath&lt;ScriptableObject&gt;(build_script) as IDataBuilder;

            if (builderScript == null)
            {
                Debug.LogError(build_script + &quot; couldn't be found or isn't a build script.&quot;);
                return false;
            }

            setBuilder(builderScript);

            return buildAddressableContent();
        }

        [MenuItem(&quot;Window/Asset Management/Addressables/Build Addressables and Player&quot;)]
        public static void BuildAddressablesAndPlayer()
        {
            bool contentBuildSucceeded = BuildAddressables();

            if (contentBuildSucceeded)
            {
                var options = new BuildPlayerOptions();
                BuildPlayerOptions playerSettings
                    = BuildPlayerWindow.DefaultBuildMethods.GetBuildPlayerOptions(options);

                BuildPipeline.BuildPlayer(playerSettings);
            }
        }
    }
#endif

</code></pre>
<p>If your build script makes setting changes that require a domain reload, you should run the build script using Unity command line options, instead of running it interactively in the Editor. Refer to <a href="build-scripting-recompiling.html">Handle domain reloads</a> for more information.</p>
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings.BuildPlayerContent*"><code>AddressableAssetSettings.BuildPlayerContent</code> API reference</a></li>
<li><a href="build-scripting-recompiling.html">Handle domain reloads</a></li>
<li><a href="xref:UnityEditor.AddressableAssets.Settings.AddressableAssetSettings"><code>AddressableAssetSettings</code> API reference</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/bossbobofather-cpu/noname/blob/main/Library/PackageCache/com.unity.addressables@38fa2290d5f2/Documentation~/build-scripting-start-build.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
